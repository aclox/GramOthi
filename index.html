<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Student Dashboard</title>
    <meta name="theme-color" content="#0d47a1">
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="icon" href="icons/icon-192.png">
    <link rel="stylesheet" href="src/styles.css">
</head>
<body>
    <header class="app-header">
        <h1>Student Dashboard</h1>
        <div class="header-right">
            <div id="liveClock" class="chip"></div>
            <button id="installBtn" class="btn btn-outline" hidden>Install App</button>
            <div class="avatar header-avatar" title="Profile">‚åÅ</div>
        </div>
    </header>
    <section class="hero">
        <div class="hero-inner">
            <h2 class="hero-title">Learn anywhere, even on 2G</h2>
            <p class="hero-sub">Audio-first classes, lightweight slides, offline quizzes.</p>
        </div>
        <svg class="hero-wave" viewBox="0 0 1440 120" preserveAspectRatio="none" aria-hidden="true">
            <path d="M0,64L80,53.3C160,43,320,21,480,37.3C640,53,800,107,960,117.3C1120,128,1280,96,1360,80L1440,64L1440,0L1360,0C1280,0,1120,0,960,0C800,0,640,0,480,0C320,0,160,0,80,0L0,0Z" fill="url(#g)" opacity="0.7"></path>
            <defs>
                <linearGradient id="g" x1="0" x2="1" y1="0" y2="0">
                    <stop offset="0%" stop-color="#1565c0"/>
                    <stop offset="100%" stop-color="#2196f3"/>
                </linearGradient>
            </defs>
        </svg>
    </section>

    <nav class="tabs" role="tablist">
        <button class="tab active" data-tab="dashboard"><span class="icon">üìä</span><span>Dashboard</span></button>
        <button class="tab" data-tab="classes"><span class="icon">üè´</span><span>Classes</span></button>
        <button class="tab" data-tab="slides"><span class="icon">üñºÔ∏è</span><span>Slides</span></button>
        <button class="tab" data-tab="video"><span class="icon">üé•</span><span>Videos</span></button>
        <button class="tab" data-tab="quizzes"><span class="icon">üìù</span><span>Quizzes</span></button>
        <button class="tab" data-tab="downloads"><span class="icon">‚¨áÔ∏è</span><span>Downloads</span></button>
    </nav>

    <main class="content">
        <section id="tab-dashboard" class="panel active" aria-labelledby="Dashboard">
            <div class="dashboard">
                <aside class="sidebar card" id="sidebar">
                    <div class="brand">ProServe <button id="sideClose" class="chip" style="float:right">‚úñ</button></div>
                    <nav class="side-nav">
                        <button class="side-item active" data-panel="tasks">Tasks</button>
                        <button class="side-item" data-panel="files">Files</button>
                        <button class="side-item" data-panel="analytics">Analytics</button>
                        <button class="side-item" data-panel="integrations">Integrations</button>
                        <button class="side-item" data-panel="notifications">Notifications</button>
                        <button class="side-item" data-panel="settings">Settings</button>
                    </nav>
                </aside>
                <section class="main">
                    <div class="topbar card">
                        <button id="sideOpen" class="btn-outline" style="margin-right:8px">‚ò∞</button>
                        <input type="search" class="search" id="globalSearch" placeholder="Search" />
                        <button id="searchBtn" class="btn" title="Search" style="margin-left:8px">üîç</button>
                    </div>
                    <div class="welcome card">
                        <div>
                            <h3>Welcome Back!</h3>
                            <p class="muted">Check your tasks and schedule</p>
                            <div class="actions">
                                <button class="btn">new task +</button>
                                <button class="btn-outline">Discover</button>
                            </div>
                        </div>
                        <div class="cube">‚¨õ</div>
                    </div>
                    <div class="card side-widgets" id="contextPanel">
                            <div class="calendar small">
                                <div class="title" id="calTitle">Month YYYY</div>
                                <div class="cal-grid" id="calGrid"></div>
                            </div>
                            <div class="upcoming">
                                <div class="title">Upcoming Tasks</div>
                                <ul id="upcomingList" class="list"></ul>
                            </div>
                    </div>
                </section>
            </div>
        </section>
        <section id="tab-classes" class="panel active" aria-labelledby="Classes">
            <h2>Join Classes</h2>
            <form id="joinClassForm" class="card">
                <label>
                    Class Code
                    <input id="classCode" type="text" required placeholder="e.g., CS101" />
                </label>
                <button type="submit" class="btn">Join</button>
            </form>
            <ul id="classList" class="list"></ul>
        </section>

        <section id="tab-slides" class="panel" aria-labelledby="Slides">
            <h2>Slides</h2>
            <div id="slidesContainer" class="grid"></div>
        </section>

        <section id="tab-video" class="panel" aria-labelledby="Videos">
            <h2>Recorded Lectures</h2>
            <ul id="videoList" class="list"></ul>
            <video id="videoPlayer" controls preload="none" playsinline style="width:100%;max-height:420px;border-radius:10px"></video>
            <div class="progress-wrap"><div id="videoProgress" class="progress"></div></div>
        </section>

        <section id="tab-quizzes" class="panel" aria-labelledby="Quizzes">
            <h2>Quizzes</h2>
            <div id="quizContainer" class="card"></div>
        </section>

        <section id="tab-downloads" class="panel" aria-labelledby="Downloads">
            <h2>Offline Downloads</h2>
            <button id="prefetchBtn" class="btn">Download Example Bundle</button>
            <ul id="downloadList" class="list"></ul>
        </section>
    </main>

    <footer class="app-footer">Made for low-bandwidth learning ‚Ä¢ PWA</footer>

    <button id="fab" class="fab" title="Quick Download">‚¨áÔ∏è</button>
    <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true"></div>

    <dialog id="profileModal" class="profile-modal">
        <div class="profile-page">
            <div class="profile-header">
                <h2>Welcome, Student</h2>
                <div class="profile-actions">
                    <div class="status-chip">Status: Active</div>
                    <div class="status-chip">Grade: A+</div>
                    <button class="btn-outline" id="uploadBtn">Upload</button>
                </div>
            </div>
            
            <div class="profile-main">
                <div class="profile-form">
                    <div class="form-grid">
                        <div class="form-column">
                            <label>Full Name
                                <input id="profileName" type="text" placeholder="Enter full name">
                            </label>
                            <label>Student ID
                                <input id="profileStudentId" type="text" placeholder="e.g., STU2025001">
                            </label>
                            <label>Class & Section
                                <input id="profileClassSection" type="text" placeholder="e.g., 10th A">
                            </label>
                        </div>
                        <div class="form-column">
                            <label>Date of Birth
                                <input id="profileDob" type="date">
                            </label>
                            <label>Phone Number
                                <input id="profilePhone" type="tel" placeholder="e.g., +91 98765 43210">
                            </label>
                            <label>Profile Photo
                                <div class="photo-upload">
                                    <img id="pfpPreview" src="" alt="profile" class="profile-photo">
                                    <label class="btn-outline upload-label">
                                        Upload Photo
                                        <input id="pfpInput" type="file" accept="image/*" style="display:none">
                                    </label>
                                </div>
                            </label>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button class="btn-outline" value="cancel">Cancel</button>
                        <button id="saveProfile" class="btn">Save Changes</button>
                    </div>
                </div>
            </div>
            
            <div class="profile-stats">
                <div class="stat-card">
                    <h3>Learning Progress</h3>
                    <div class="stat-content">
                        <div class="stat-icon">üìö</div>
                        <div class="stat-text">
                            <span class="stat-number" id="classesJoined">0</span>
                            <span class="stat-label">Classes Joined</span>
                        </div>
                    </div>
                </div>
                <div class="stat-card">
                    <h3>This Semester</h3>
                    <div class="stat-content">
                        <div class="stat-icon">üéØ</div>
                        <div class="stat-text">
                            <span class="stat-number" id="quizzesCompleted">0</span>
                            <span class="stat-label">Quizzes Completed</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="profile-footer">
                <button id="logoutBtn" class="btn-outline logout-btn">Logout</button>
            </div>
        </div>
    </dialog>

    <script src="src/idb.js"></script>
    <script src="src/api.js"></script>
    <script src="src/app.js" defer></script>
</body>
</html>
